<app-header></app-header>

<div class="container text-center">
    <div class="tasks">
        <h3>
            Tasks
        </h3>
        <div><div>
                <input type="text" [(ngModel)]="searchString" class="form-control" placeholder="search task">
            </div>
            <div>
                <table *ngIf="user.tasks!=null" class="table table-strip">
                    <tr>
                        <th>Task name</th>
                        <th>Task Description</th>
                        <th>Start date</th>
                        <th>End date</th>
                        <th>Status</th>
                    </tr>
                    <tr *ngFor="let task of user.tasks | searchTask:searchString; let i = index" >
                        <td>{{task.taskName}}</td>
                        <td>{{task.taskDesc}}</td>
                        <td>{{task.startDate}}</td>
                        <td>{{task.endDate}}</td>
                        <td>{{task.status}}</td>
                        <td *ngIf="task.status!='completed'"><a (click)="selectedTask(task,i)" class="btn btn-warning">Edit</a></td>
                        <td *ngIf="task.status!='completed'"><a (click)="deleteTask(task.taskId)" class="btn btn-danger">Delete</a></td>
                        <td *ngIf="task.status!='completed'"><a (click)="updateStatus(task)" class="btn btn-primary">Completed</a></td>
                    </tr>
                </table>
            </div>
            <div *ngIf="user.tasks.length == 0">
                No Task created 
                <div>
                    <a href="addtask" class="btn btn-primary">Add task</a>
                </div>
            </div>
        </div>
    </div>
    <div>
        <div *ngIf="editTask.taskId!=null" id="taskForm">
            <div class="form-group">
                <input [(ngModel)]="editTask.taskName" type="text" class="form-control" placeholder="Enter Task name">
            </div>
            <div class="form-group">
                <input [(ngModel)]="editTask.taskDesc" type="text" class="form-control" placeholder="Enter Task Description">
            </div>
            <div class="form-group">
                <input [(ngModel)]="editTask.startDate" type="date" class="form-control" placeholder="Task start date">
            </div>
            <div class="form-group">
                <input [(ngModel)]="editTask.endDate" type="date" class="form-control" placeholder="Task end date">
            </div>
            <div>
                <button (click)="updateTask()" class="btn btn-warning">Update task</button>
            </div>
        </div>
    </div>
</div>
